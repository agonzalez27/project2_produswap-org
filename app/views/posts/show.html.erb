<div>
<%= @post.user.first_name %> <%= @post.user.last_name %>
<br>
<%= @post.summary %>
<br>
<%= @post.content %>
<br>
<%= @post.created_at %>
</div>

<br>
<% if (current_user.id == @user.id) %>
<%= link_to "Edit Post", edit_user_post_path(current_user, @post) %>
<% end %>
<%= link_to "Back to Swaps", post_page_path(current_user) %>
<br>

<div>
<!-- #form to send message to post author -->
<%= form_for([@user, @post, @message]) do |f| %>
<%= f.text_field :content, required: true, placeholder: "message" %>
<%= f.hidden_field :recipient, :value => @post.user.id %>
<br>
<%= f.submit %>
<% end %>
</div>

<br>
<!-- #displays message -->
<div>
  <% @post.messages.each do |message| %>
    <% if message.user == current_user || message.recipient == current_user.id %>
      <br>
      <%= message.user.first_name %> <%= message.user.last_name %>
      <br>
      <%= message.content %>
      <br>
      <%= message.created_at %>
      <br>

    <!-- #reply form -->
    <%= form_for([@user, @post, @message]) do |f| %>
      <br>
        <%= f.text_field :content, required: true, placeholder: "reply" %>
      <br>
        <%= f.hidden_field :recipient, :value => message.user.id %>
      <%= f.submit %>

      <% end %>
    <% end %>
  <% end %>
</div>
